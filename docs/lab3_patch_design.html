<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Phoebe Zarnetske; plz@msu.edu" />


<title>MSU Graduate Spatial Ecology Lab 3</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">MSU Grad Spatial Ecology</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="lab1_R.html">Lab 1: R</a>
</li>
<li>
  <a href="lab2_scale.html">Lab 2: R</a>
</li>
<li>
  <a href="lab3_patch_design.html">Lab 3: R</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">MSU Graduate Spatial Ecology Lab 3</h1>
<h4 class="author">Phoebe Zarnetske; <a href="mailto:plz@msu.edu" class="email">plz@msu.edu</a></h4>
<h4 class="date">Sep 2016; rev. Sep 9, 2019, Sep 17, 2020</h4>

</div>


<div id="lab-3-patch-metrics-spatial-design" class="section level1">
<h1>Lab 3: Patch Metrics &amp; Spatial Design</h1>
<p><em><a href="lab3_patch_design.Rmd">RMarkdown version of this Lab</a></em></p>
<p>This lab has 2 Parts. Part 1 involves computing patch metrics. Part 2 involves applying patch metrics to design a sampling scheme. You will need to hand in a single PDF produced from your R Markdown file with code, plots, and answers to Questions 1-4, to D2L. When referring to the code below it may be more useful to use the .Rmd file linked above. You will need to be connected to the internet to complete this lab.</p>
<p>At the end of Lab 3 is Homework in preparation for Lab 4 (familiarizing yourself with GitHub).</p>
<div id="part-1-patch-metrics" class="section level2">
<h2>Part 1: Patch Metrics</h2>
<p>We will be using the R package, <code>landscapemetrics</code> to compute patch metrics. Before we can do that, we need to set up the directories and obtain data.</p>
<p>Start working in R:</p>
<pre class="r"><code>##### STARTING UP R
# Clear all existing data
rm(list=ls())

# Close graphics devices
graphics.off()

# Set the paths for your work
output_path&lt;-(&quot;output&quot;)
# if this folder doesn&#39;t exist, create it
if(!dir.exists(output_path)){
  dir.create(output_path)
}

# Create the folders (directories) &quot;data&quot; and &quot;lab2&quot; - If they exist already, this command won&#39;t over-write them.
data_path&lt;-(file.path(&quot;data&quot;,&quot;lab3&quot;))
if(!dir.exists(data_path)){
  dir.create(data_path,recursive = TRUE)
}</code></pre>
<p>If you previously saved your workspace and want to load it here, do so this way:</p>
<p><code>load(file.path(output_path,"lab3.RData"))</code></p>
<p><strong>NOTES on R packages used in this lab:</strong></p>
<ol style="list-style-type: decimal">
<li>With R Markdown, it is helpful to install packages locally before knitting (copy this into your R console before you knit). <code>for (package in c("ggplot2","raster","sp","rgdal","maptools","rgeos")) {</code> <code>if (!require(package, character.only=T, quietly=T)) {</code></li>
</ol>
<p><code>install.packages(package)</code></p>
<p><code>library(package, character.only=T)</code></p>
<p><code>}</code></p>
<p><code>}</code></p>
<ol start="2" style="list-style-type: decimal">
<li><code>FedData</code> should be installed from github and requires <code>data.table</code> package first. If the installation below for FedData doesn’t work for you, I have included another approach to obtain 2011 NLCD data for Oregon, described farther down.</li>
</ol>
<p><code>install.packages("data.table", type="binary")</code></p>
<p><code>library(data.table)</code></p>
<p><code>install.packages("remotes")</code></p>
<p><code>remotes::install_github("ropensci/FedData")</code></p>
<p><code>library(FedData)</code></p>
<ol start="3" style="list-style-type: decimal">
<li>The packages <code>landscapemetrics</code> and <code>landscapetools</code> may require loading separately.</li>
</ol>
<p><code>install.packages("landscapemetrics")</code></p>
<p><code>install.packages("landscapetools")</code></p>
<p>If you run into errors installing landscape metrics or applying it, try this installation instead:</p>
<p><code>devtools::install_github("r-spatialecology/landscapemetrics")</code></p>
<p><code>library(landscapemetrics)</code></p>
<p>Load the packages:</p>
<pre class="r"><code>library(ggplot2)
library(raster)
library(sp)
library(rgdal)
library(rgeos)
library(maptools)
library(landscapemetrics)
library(landscapetools)
library(FedData)</code></pre>
<p>The <code>FedData</code> R package is a good way to pull in US environmental data from federal sources. See more here: <a href="https://docs.ropensci.org/FedData/" class="uri">https://docs.ropensci.org/FedData/</a>. Through <code>FedData</code> we are downloading the 2016 NLCD land cover product for Oregon. We want to work with NLCD data, so it’s important to look up its projection. That can be found in the metadata for 2016 NLCD (navigate to <a href="https://www.mrlc.gov/data" class="uri">https://www.mrlc.gov/data</a>, scroll down to 2016 Land Cover for CONUS, click on the 3 dots to expand the menu and select “Metadata”. Metadata contain data about data. Search for “proj” to find the projection information) <a href="https://www.mrlc.gov/downloads/sciweb1/shared/mrlc/metadata/NLCD_2016_Land_Cover_L48.xml" class="uri">https://www.mrlc.gov/downloads/sciweb1/shared/mrlc/metadata/NLCD_2016_Land_Cover_L48.xml</a>. It’s Albers Conical Equal Area, WGS84. If you need a refresher on Coordinate Reference Systems, refer to this summary sheet (<a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/OverviewCoordinateReferenceSystems.pdf" class="uri">https://www.nceas.ucsb.edu/sites/default/files/2020-04/OverviewCoordinateReferenceSystems.pdf</a>), Lab 2’s links, or resources on D2L.</p>
<p>Practice working with shapefiles and projecting:</p>
<pre class="r"><code># Create a polygon the state of Oregon from the States of US shapefile
if(! file.exists(file.path(data_path,&#39;uss.zip&#39;))){
  download.file(&quot;http://www2.census.gov/geo/tiger/GENZ2014/shp/cb_2014_us_state_20m.zip&quot;, dest=file.path(data_path,&quot;uss.zip&quot;), mode=&quot;wb&quot;) 
}
unzip (file.path(data_path,&quot;uss.zip&quot;), exdir = data_path)

# Read in the shapefile with rgdal package.
uss &lt;- readOGR(file.path(data_path,&quot;cb_2014_us_state_20m.shp&quot;))

#Take a look at the shapefile info. Its CRS is here: https://epsg.io/42310.
summary(uss)
# What are the first 6 lines of uss?
head(uss)
# Plot it. See that it&#39;s showing the states and territories of the US.
plot(uss)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code># What are the unique entries in the field, NAME?
unique(uss$NAME)</code></pre>
<p><strong>Projecting</strong> We can project these data to match the NLCD data coordinate reference system (Albers, also known as NAD83 / Albers NorthAm). FedData R package returns NLCD data in a different CRS. In general you should avoid projecting rasters because projection of rasters affects their cell values. If you’re working with a raster and a vector in some spatial analysis, project the vector data to match the raster projection.</p>
<pre class="r"><code># Here&#39;s the CRS info that FedData returns for NLCD (Pseudo Mercator: https://epsg.io/3857)
merc.proj &lt;- CRS(&quot;+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs&quot;)
# Here&#39;s the CRS info for CONUS North America Albers Equal Area Conic (https://epsg.io/5070)
us.aea.proj &lt;- CRS(&quot;+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs&quot;)

# First let&#39;s make a shapefile of just Oregon from the entire US shapefile:
or &lt;- uss[uss$NAME ==&quot;Oregon&quot;,] 

# Plot Oregon
plot(or, main=&quot;Latitude, Longitude NAD83&quot;)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code># Practice projecting, and plot again - 
or1&lt;-spTransform(or, us.aea.proj)
plot(or1, main=&quot;Albers Equal Area Conic&quot;)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<pre class="r"><code># Supposed you decide to use a rectangle instead of the Oregon polygon boundary.
# Refer to the extent (min and max x and y) of the shapefile, &quot;or1&quot;
summary(or1)
or2 &lt;- polygon_from_extent(raster::extent(-2294351,-1584307,2301475,2899476), proj4string=&#39;+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs&#39;)

# See how the or2 outlines to the polygon, &quot;or1&quot;
plot(or2)
plot(or1,add=T, col=&quot;blue&quot;)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-4-3.png" width="672" /></p>
<p>Depending on your computer, these polygons will still be too big to extract NLCD quickly (when I run it on my laptop it takes about 5 mins, so you could try it but it may get hung up if you are knitting to PDF). Let’s try a smaller extent. If you wanted to subset out just a portion of Oregon, you could select 1 wildlife management unit. Here is a map of OR Fish &amp; Wildlife Units: <a href="https://www.dfw.state.or.us/resources/hunting/big_game/units/bigmap.asp" class="uri">https://www.dfw.state.or.us/resources/hunting/big_game/units/bigmap.asp</a>.</p>
<p><strong>Repeat the same process as above, but with the management unit, Hood.</strong></p>
<pre class="r"><code>if(! file.exists(&#39;mgmt.zip&#39;)){
 download.file(&quot;https://nrimp.dfw.state.or.us/web%20stores/data%20libraries/files/ODFW/ODFW_805_5_wildlife_mgmt_units.zip&quot;,dest=file.path(data_path,&quot;mgmt.zip&quot;), mode=&quot;wb&quot;) 
}
unzip (file.path(data_path,&quot;mgmt.zip&quot;), exdir = data_path)
mgmt&lt;-readOGR(file.path(data_path,&quot;wmu24poly.shp&quot;))

summary(mgmt) # Its CRS is lcc (Lambert Conformal Conic: https://proj.org/operations/projections/lcc.html)
lcc.proj&lt;-CRS(&quot;+proj=lcc +lat_0=41.75 +lon_0=-120.5 +lat_1=43 +lat_2=45.5 +x_0=400000 +y_0=0 +datum=NAD83 +units=ft +no_defs&quot;)

# Project mgmt to the lcc projection from the Oregon NLCD 2011 (see below)
mgmt1&lt;-spTransform(mgmt, lcc.proj)

head(mgmt1)
unique(mgmt1$UNIT_NAME)
# Select the HOOD Management Unit (where Mount Hood is).
hood &lt;- mgmt1[mgmt$UNIT_NAME ==&quot;HOOD&quot;,] 
## See where it&#39;s located. Plotting and rendering may take a minute because these polygons are complex.
plot(mgmt1,main=&quot;Hood Wildlife Management Unit, Oregon&quot;)
plot(hood,add=T,col=&quot;red&quot;)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Use the <code>get_nlcd</code> command from <code>FedData</code> to extract the NLCD data for this management unit. <code>FedData</code> does the cropping automatically using a shapefile or raster for “template”. If you run into errors you may need to check what the projection of hood_nlcd is.</p>
<pre class="r"><code>?get_nlcd
 
hood_nlcd&lt;-get_nlcd(
  template = hood,
  label=&quot;Hood&quot;,
  year = 2016,
  dataset = &quot;Land_Cover&quot;,
  extraction.dir = paste0(data_path, &quot;/FedData/&quot;),
  )
hood_nlcd # CRS = merc; project hood to overlay them on the same plot.
hood.merc&lt;-spTransform(hood, merc.proj)
# See if you can add a legend - what are the classifications? https://www.mrlc.gov/data/legends/national-land-cover-database-2016-nlcd2016-legend
unique(hood_nlcd)

plot(hood_nlcd,legend = FALSE)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>plot(hood.merc,add=TRUE, lwd=2, border=&#39;white&#39;)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-6-2.png" width="672" /></p>
<p>If you have trouble with the <code>FedData</code> package, the code below will import the 2011 Oregon NLCD directly (54 MB); it may take a few mins.</p>
<p><code>if(! file.exists('or_nlcd.zip')){</code></p>
<p><code>download.file("http://oe.oregonexplorer.info/ExternalContent/SpatialDataforDownload/OR_NLCD_2011.zip",</code></p>
<p><code>dest=file.path(data_path,"or_nlcd.zip"), mode="wb")</code></p>
<p><code>}</code></p>
<p><code>unzip (file.path(data_path,"or_nlcd.zip"), exdir = data_path)</code></p>
<p><code>or_nlcd &lt;- raster(file.path(data_path,"./OR_NLCD_2011/nlcd_or_20111"))</code></p>
<p><code>save.image("lab3.RData")</code></p>
<p>Take a look at or_nlcd from 2011 - it is projected in lcc.</p>
<p><code>or_nlcd</code></p>
<p>Crop or_nlcd by hood</p>
<p><code>hood_nlcd&lt;-crop(or_nlcd, extent(hood))</code></p>
<p><code>hood_nlcd &lt;- mask(x = hood_nlcd, mask = hood)</code></p>
<p><code>plot(hood_nlcd)</code></p>
<p><code>plot(hood,add=TRUE, lwd=2, border='white')</code></p>
<p>If you want to output a raster as a tif</p>
<p><code>?writeRaster</code></p>
<p><code>writeRaster(raster, "raster.tif")</code></p>
<p>Now work with the <code>landscapemetrics</code> R package to compute different patch and landscape statistics.</p>
<pre class="r"><code>## Make a plot of the Hood NLCD data - this renders a map of the NLCD raster. It may take a few mins to render. Then check to see if the input data is suitable for computing patch metrics
 
show_landscape(hood_nlcd)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code>check_landscape(hood_nlcd)</code></pre>
<p>You could proceed to calculate metrics for all different land cover classes (this would take a while). Instead, suppose you are interested in the metrics of “forested” patches in this landscape. First, reclassify into “forest” and “nonforest”. You need to determine what the cover types are:</p>
<pre class="r"><code>unique(hood_nlcd)
## Look here at the &quot;Class/Value&quot; to figure out which cover type(s) you want: https://www.mrlc.gov/data/legends/national-land-cover-database-2016-nlcd2016-legend. For example, evergreen is 42. However, there are other forest cover types as well. Determine how to make the raster &quot;all forest&quot; not just evergreen. 
hood_for &lt;- hood_nlcd
hood_for[hood_for &lt; 41] &lt;- 0 # make everything below 41 zero
plot(hood_for)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-8-1.png" width="672" /><img src="lab3_patch_design_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<pre class="r"><code>hood_for[hood_for &gt; 43] &lt;- 0 # make everything above 43 zero
plot(hood_for)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-8-3.png" width="672" /><img src="lab3_patch_design_files/figure-html/unnamed-chunk-8-4.png" width="672" /></p>
<pre class="r"><code>unique(hood_for)
## Assign 1 value (1) to forest.
hood_for[hood_for == 41 | hood_for == 42 | hood_for == 43] &lt;- 1
show_landscape(hood_for)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-8-5.png" width="672" /></p>
<p>The code below follows part of this vignette: <a href="https://r-spatialecology.github.io/landscapemetrics/articles/articles/utility.html" class="uri">https://r-spatialecology.github.io/landscapemetrics/articles/articles/utility.html</a> - check it out for more context and if you would like to try other commands not covered here.</p>
<pre class="r"><code>## Check to see if the input data is suitable for computing patch metrics
check_landscape(hood_for)

## Look at the distinct patches for this landscape
show_patches(hood_for) </code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>## Show patches of each class (we have 2 classes: 0 for non-forest and 1 for forest)
show_patches(hood_for, class = &quot;all&quot;, labels = FALSE)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
<pre class="r"><code>## At the patch level, compute patch metrics
hood_metrics &lt;- calculate_lsm(hood_for, what = &quot;patch&quot;)

## Look at the different types of metrics at the patch level. Note that you can compute these metrics at the patch, landscape, or class levels.
list_lsm(level=&#39;patch&#39;)

#look at just Forested patches; subset out class==1 for forest
hood_metrics_for &lt;- subset(hood_metrics, class == 1)

# Since hood_metrics_for is a tibble, we use this format for plotting (using ggplot2). Note that the y axis scale varies by plot when faceting by metric below. We use a log10 scale for the x axis to visualize the spread more effectively.
hood_for_metrics_hist&lt;-hood_metrics_for %&gt;%
     select(value, metric) %&gt;%
     na.omit() %&gt;%
     ggplot(aes(value, fill = metric, color = metric)) +
     geom_density(alpha = 0.2)+
     scale_x_log10()+
     facet_wrap(~metric, scales=&quot;free_y&quot;)
hood_for_metrics_hist</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-9-3.png" width="672" /></p>
<pre class="r"><code>## Determine if any patch metrics for forest are correlated
hood_for_corr&lt;-calculate_correlation(hood_metrics_for)
show_correlation(hood_for_corr, method = &quot;pearson&quot;)</code></pre>
<p><img src="lab3_patch_design_files/figure-html/unnamed-chunk-9-4.png" width="672" /></p>
<div id="question-1" class="section level3">
<h3>QUESTION 1:</h3>
<p>How do the patch metrics from <code>landscapemetrics</code> help you understand how an organism interacts with its environment? For 3 metrics of your choice, explain in 1-2 sentences what the metric tells us about an organism’s interaction with its environment. Feel free to use examples. Refer to the <code>list_lsm()</code> results above. You may also want to refer to the FRAGSTATS documentation for more in-depth coverage (warning: this is a large document, I suggest searching for the patch metric term. Page 77 contains the start of the “metrics” discussion, but page 92 contains a condensed table): <a href="https://www.umass.edu/landeco/research/fragstats/documents/fragstats_documents.html" class="uri">https://www.umass.edu/landeco/research/fragstats/documents/fragstats_documents.html</a></p>
</div>
<div id="question-2" class="section level3">
<h3>QUESTION 2:</h3>
<p>Repeat the process above (see <em>Repeat the same process as above, but with the management unit, Hood</em>), but select a <strong>different</strong> management unit than Hood. Compare your other management unit patch metrics with the ones for Hood Management Area. Briefly, how do the patch metrics for Forested areas and non-Forested areas compare between the two management areas? Optional: make some plots showing the statistical distributions of patch metrics across the two areas (e.g., a histogram of patch area, by class, by management unit).</p>
</div>
</div>
<div id="part-2-study-design" class="section level2">
<h2>Part 2: Study Design</h2>
<p>You decide to study the interactions between Spotted Owls and Barred Owls in Oregon forests (do a little internet searching to understand why studying these 2 species together is important, and what their habitat requirements are).</p>
<div id="question-3." class="section level3">
<h3>QUESTION 3.</h3>
<p>Use GBIF data to add to one of the management unit maps you created above. On this map, overlay “recent” point locations of each of these species (as different symbols and/or different colors). Justify the timeframe you chose for the occurrences. Add a descriptive title to the plot. Add a legend, scalebar (with units), and north arrow for your map. You may want to reference Lab 2 and below for additional code.</p>
<p>In the <code>raster</code> package see the options for each command: <code>?plot</code> to plot the raster <code>?points()</code> to add points for the species <code>?legend()</code> to add a legend <code>?scalebar()</code> to add a scalebar</p>
</div>
<div id="question-4." class="section level3">
<h3>QUESTION 4.</h3>
<p>If you had unlimited resources, describe how you would sample the 2 management units to obtain new occurrence data next year for both species. Are there specific forest attributes that would be helpful to know in addition to just “forest vs. non-forest”? Use terminology from the Lecture and Discussion about sampling.</p>
<p><em>Some other potentially helpful code below:</em></p>
<p><code>gbif</code>: Extract out just points from Oregon (or some extent): <a href="http://www.inside-r.org/packages/cran/dismo/docs/rgbif" class="uri">http://www.inside-r.org/packages/cran/dismo/docs/rgbif</a>. There are 2 ways of extracting out the points:</p>
<p>The commands, <code>drawExtent</code> and <code>extent</code> are both ways to specify the extent of data in <code>gbif()</code></p>
<p><code>drawExtent</code> is in the raster package: <a href="http://www.inside-r.org/packages/cran/raster/docs/drawExtent" class="uri">http://www.inside-r.org/packages/cran/raster/docs/drawExtent</a>. You have to have plotted a map first (and then click on it). This won’t be possible if you’re running a script via job submission on HPCC. You can also use <code>extent</code>, also in the raster package, to define boundaries: <a href="http://www.inside-r.org/packages/cran/raster/docs/extent" class="uri">http://www.inside-r.org/packages/cran/raster/docs/extent</a></p>
</div>
</div>
<div id="homework-in-preparation-for-lab-4" class="section level2">
<h2>Homework in preparation for Lab 4:</h2>
<p>In Lab 4 we will introduce GitHub, a versioning program helpful for collaborating and tracking changes in code. You can think of it as a Google Docs version for tracking code changes (you can also use it with text). If you are familiar with GitHub, no need to go over the following, but if you are not familiar, please work through the following tutorials [personally, I use the Desktop version but any version will work]:</p>
<p>At a minimum, please complete this first short tutorial ahead of Lab 4:</p>
<ol style="list-style-type: decimal">
<li>Command line version: <a href="https://guides.github.com/activities/hello-world/" class="uri">https://guides.github.com/activities/hello-world/</a></li>
</ol>
<p>Other versions:</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Desktop version: <a href="https://help.github.com/desktop/guides/getting-started-with-github-desktop/" class="uri">https://help.github.com/desktop/guides/getting-started-with-github-desktop/</a></p></li>
<li><p>via RStudio: <a href="http://happygitwithr.com/rstudio-git-github.html" class="uri">http://happygitwithr.com/rstudio-git-github.html</a> and/or <a href="https://support.rstudio.com/hc/en-us/articles/200532077-Version-Control-with-Git-and-SVN" class="uri">https://support.rstudio.com/hc/en-us/articles/200532077-Version-Control-with-Git-and-SVN</a></p></li>
</ol>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Licensed under CC-BY 4.0 2020 by Phoebe Zarnetske</a>.</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
